(function(a,e){typeof exports=="object"&&typeof module!="undefined"?e(exports):typeof define=="function"&&define.amd?define(["exports"],e):(a=typeof globalThis!="undefined"?globalThis:a||self,e(a.fakelink={}))})(this,function(a){"use strict";var f=Object.defineProperty;var h=(a,e,i)=>e in a?f(a,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):a[e]=i;var u=(a,e,i)=>(h(a,typeof e!="symbol"?e+"":e,i),i);const r=class{constructor(t=document){u(this,"context");this.context=t.parentElement||document,this.run()}run(){this.muteLinks(),this.createLinks()}static getLinkAttributesAllowed(){return["href","hreflang","target","rel","download","ping","type"]}static camelCaseToKebabCase(t){return t.replace(/[A-Z]/g,c=>`-${c.toLowerCase()}`)}static replaceTag(t,c){const n=document.createElement(c),o=t.attributes;for(let s=0;s<o.length;s++){const l=o[s];n.setAttribute(l.name,l.value)}for(const s of Array.from(t.children))n.append(s);t.replaceWith(n),t.dispatchEvent(new CustomEvent(r.EVENT_FL_REPLACED,{detail:{newElem:n}}))}muteLinks(){var t;(t=this.getFlMutes())==null||t.forEach(r.muteLink)}static muteLink(t){const c=t.getAttribute("data-fl-mute")||"div";t.removeAttribute("data-fl-mute"),r.getLinkAttributesAllowed().forEach(n=>{t.removeAttribute(n)}),r.replaceTag(t,c)}createLinks(){this.getFlHrefs().forEach(r.createLink)}static createLink(t){Object.keys(Object.assign({},t.dataset)).forEach(n=>{const o=r.camelCaseToKebabCase(n);if(o.startsWith("fl-")){const s=t.dataset[n]||"";t.removeAttribute(`data-${o}`);const l=o.replace("fl-","");r.getLinkAttributesAllowed().includes(l)&&t.setAttribute(l,s)}}),r.replaceTag(t,"a")}getFlMutes(){return this.context.querySelectorAll("[data-fl-mute]")}getFlHrefs(){return this.context.querySelectorAll("[data-fl-href]")}};let e=r;u(e,"EVENT_FL_REPLACED","fl:replaced");class i{attach(t){new e(t)}detach(){}}const d=new i;a.Fakelink=e,a.FakelinkDrupalBehaviorInstance=d,Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})});
