(function(a,e){typeof exports=="object"&&typeof module!="undefined"?e(exports):typeof define=="function"&&define.amd?define(["exports"],e):(a=typeof globalThis!="undefined"?globalThis:a||self,e(a.fakelink={}))})(this,function(a){"use strict";var h=Object.defineProperty;var b=(a,e,s)=>e in a?h(a,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[e]=s;var l=(a,e,s)=>(b(a,typeof e!="symbol"?e+"":e,s),s);const n=class{constructor(t=document){l(this,"context");this.context=t.parentElement||document,this.run()}run(){this.muteLinks(),this.createLinks()}static getLinkAttributesAllowed(){return["href","hreflang","target","rel","download","ping","type"]}static camelCaseToKebabCase(t){return t.replace(/[A-Z]/g,c=>`-${c.toLowerCase()}`)}static replaceTag(t,c){const r=document.createElement(c),o=t.attributes;for(let i=0;i<o.length;i++){const d=o[i];r.setAttribute(d.name,d.value)}if(Array.from(t.children).length>0)for(const i of Array.from(t.children))r.append(i);else r.innerHTML=t.innerHTML;t.replaceWith(r),t.dispatchEvent(new CustomEvent(n.EVENT_FL_REPLACED,{detail:{newElem:r}}))}muteLinks(){var t;(t=this.getFlMutes())==null||t.forEach(n.muteLink)}static muteLink(t){const c=t.getAttribute("data-fl-mute")||"div";t.removeAttribute("data-fl-mute"),n.getLinkAttributesAllowed().forEach(r=>{t.removeAttribute(r)}),n.replaceTag(t,c)}createLinks(){this.getFlHrefs().forEach(n.createLink)}static createLink(t){Object.keys(Object.assign({},t.dataset)).forEach(r=>{const o=n.camelCaseToKebabCase(r);if(o.startsWith("fl-")){const u=t.dataset[r]||"";t.removeAttribute(`data-${o}`);const i=o.replace("fl-","");n.getLinkAttributesAllowed().includes(i)&&t.setAttribute(i,u)}}),n.replaceTag(t,"a")}getFlMutes(){return this.context.querySelectorAll("[data-fl-mute]")}getFlHrefs(){return this.context.querySelectorAll("[data-fl-href]")}};let e=n;l(e,"EVENT_FL_REPLACED","fl:replaced");class s{attach(t){new e(t)}detach(){}}const f=new s;a.Fakelink=e,a.FakelinkDrupalBehaviorInstance=f,Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})});
